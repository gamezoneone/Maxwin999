<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Game Zone</title>
    <link rel="icon" href="https://vqmfachxnjyxwuavpgds.supabase.co/storage/v1/object/public/zaus/SLOT77.png" type="image/png">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
<audio id="backgroundMusic" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" preload="auto" loop></audio>
    <audio id="clickSound" src="https://vqmfachxnjyxwuavpgds.supabase.co/storage/v1/object/public/music//mixkit-game-ball-tap-2073.mp3" preload="auto"></audio>
    <audio id="lineClearSound" src="https://vqmfachxnjyxwuavpgds.supabase.co/storage/v1/object/public/music//mixkit-mechanical-crate-pick-up-3154%20(1).mp3" preload="auto"></audio>
    <audio id="blockLandSound" src="https://vqmfachxnjyxwuavpgds.supabase.co/storage/v1/object/public/music//mixkit-arcade-game-jump-coin-216.mp3" preload="auto"></audio>

<button class="hamburger-menu" id="hamburgerBtn">
    Menu
</button>


    <div class="sidebar-overlay" id="sidebarOverlay">
        <div class="sidebar-content">
            <h2 id="sidebarTitle">Menu Utama</h2>
            <div id="sidebar-auth-toggle">
                <button class="sidebar-nav-btn" id="sidebarLoginBtn"><i class="fas fa-sign-in-alt"></i> Login</button>
                <button class="sidebar-nav-btn" id="sidebarRegisterBtn"><i class="fas fa-user-plus"></i> Daftar</button>
            </div>
            <button class="sidebar-nav-btn" id="sidebarProfileBtn" style="display:none;"><i class="fas fa-user-circle"></i> Profil</button>
            <button class="sidebar-nav-btn" id="sidebarDepositBtn"><i class="fas fa-wallet"></i> Deposit</button>
            <button class="sidebar-nav-btn" id="sidebarWithdrawBtn"><i class="fas fa-exchange-alt"></i> Penarikan</button>
            <button class="sidebar-nav-btn" id="sidebarHistoryBtn"><i class="fas fa-history"></i> Riwayat Transaksi</button>
            <a href="https://wa.me/628892l37079" target="_blank" class="sidebar-nav-btn"><i class="fab fa-whatsapp"></i> Kontak Admin</a>
            <button class="sidebar-nav-btn" id="sidebarEventBtn"><i class="fas fa-calendar-alt"></i> Event</button>
            <button class="sidebar-nav-btn" id="sidebarLogoutBtn" style="display:none;"><i class="fas fa-sign-out-alt"></i> Logout</button>
        </div>
    </div>

    <div class="game-wrapper">
        <div class="header-content">
            <h1>Game Zone</h1>
            <marquee><strong>Game susun balok di rancang khusus tanpa manipulasi sistem.Kemenangan murni hasil strategi bermain! {•minimum deposit maximum withdraw•}.© 2025 GAME ZONE dilindungi HAK CIPTA.</strong></marquee>
        </div>

        <div class="game-container">
            <div class="player-banner">
                <p><strong>user:</strong> <span id="playerName">Memuat...</span></p>
                <p><strong>saldo:</strong> Rp.<span id="balance">0</span></p>
                <p><strong>Kemenangan:</strong> Rp.<span id="totalKemenanganSesi">0</span></p>
                <p><strong>Kekalahan:</strong> Rp.<span id="totalKekalahanDisplay">0</span></p>
            </div>

            <canvas id="gameCanvas"></canvas>
            <div class="controls">
                <button id="moveLeftBtn" class="control-btn">←</button>
                <button id="rotateBtn" class="control-btn">↻</button>
                <button id="moveRightBtn" class="control-btn">→</button>
                <button id="softDropBtn" class="control-btn">↓</button>
            </div>
            <div id="message-area" class="message-area"></div>
        </div>
    </div>

    <div id="authModal" class="modal-overlay">
        <div class="modal-content">
            <h2 id="authModalTitle">Login</h2>
            <form id="loginForm">
                <label for="login-email">Email</label>
                <input type="email" id="login-email" placeholder="Masukkan email Anda" required />
                <label for="login-password">Password</label>
                <input type="password" id="login-password" placeholder="Masukkan password" required />
                <button type="submit">Login</button>
                <p class="small-text"><span class="link-text" onclick="showCustomAlert('Lupa Password?', 'Fitur reset password belum tersedia. Silakan hubungi admin jika Anda mengalami masalah.')">Lupa Password?</span></p>
                <button type="button" class="secondary" onclick="toggleAuthMode()">Daftar</button>
                <button type="button" class="secondary" onclick="closeModal('authModal')">Batal</button>
            </form>

            <form id="registerForm" style="display:none;">
                <label for="reg-username">Username</label>
                <input type="text" id="reg-username" placeholder="Buat username" required />
                <label for="reg-email">Email</label>
                <input type="email" id="reg-email" placeholder="Masukkan email Anda" required />
                <label for="reg-password">Password</label>
                <input type="password" id="reg-password" placeholder="Buat password (min. 6 karakter)" required />
                <label for="reg-password2">Konfirmasi Password</label>
                <input type="password" id="reg-password2" placeholder="Konfirmasi password" required />
                <button type="submit">Daftar Akun</button>
                <button type="button" class="secondary" onclick="toggleAuthMode()">Login</button>
                <button type="button" class="secondary" onclick="closeModal('authModal')">Batal</button>
            </form>
        </div>
    </div>

    <div id="profileModal" class="modal-overlay">
        <div class="modal-content">
            <h2>Profil Pengguna</h2>
            <p><strong>Username:</strong> <span id="profileUsername"></span></p>
            <p><strong>Email:</strong> <span id="profileEmail"></span></p>
            <p><strong>Saldo:</strong> Rp.<span id="profileSaldo"></span></p>
            <p><strong>Kemenangan Tertinggi:</strong> Rp.<span id="profileHighestWin"></span></p>
            <button type="button" onclick="closeModal('profileModal')">Tutup</button>
        </div>
    </div>

    <div id="depositModal" class="modal-overlay">
        <div class="modal-content">
            <h2>DEPOSIT VIA DANA</h2>
            <label for="dep-nama">Nama Penerima:</label>
            <input type="text" id="dep-nama" placeholder="Nama" readonly />
            <label for="dep-email">Email Pemain:</label>
            <input type="email" id="dep-email" placeholder="Email" readonly />
            <div class="input-group-with-copy">
                <label for="dep-nomor">Nomor Tujuan:</label>
                <input type="text" id="dep-nomor" placeholder="Nomor" readonly />
                <button class="btn-copy" data-target="dep-nomor">
                    <i class="fas fa-copy"></i> Salin nomor
                </button>
            </div>
            <div style="text-align:center; margin: 25px 0;">
                <button class="secondary" id="btn-qris">Deposit via QRIS</button>
                <button class="secondary" id="btn-kembali-ewallet" style="display:none;">Kembali eWallet</button>
            </div>
            <div id="form-qris" style="display:none;">
                <img src="" alt="QRIS" id="gambar-qris" style="max-width:100%; height:auto; margin-top:15px;" />
            </div>
            <label for="dep-jumlah">Jumlah (Rp):</label>
            <input type="number" id="dep-jumlah" placeholder="Contoh: 50000" />
            <button class="primary" id="dep-submit">Kirim</button>
            <button type="button" class="secondary" onclick="closeModal('depositModal')">Batal</button>
        </div>
    </div>

    <div id="withdrawModal" class="modal-overlay">
        <div class="modal-content">
            <h2>PENARIKAN DANA</h2>
            <label for="with-nama">Nama Penerima:</label>
            <input type="text" id="with-nama" placeholder="Nama Lengkap" />
            <label for="with-email">Email:</label>
            <input type="email" id="with-email" placeholder="Email" readonly />
            <label for="with-metode">Metode Penarikan:</label>
            <select id="with-metode">
                <option value="">Pilih e-Wallet/Bank</option>
                <option value="DANA">DANA</option>
                <option value="OVO">OVO</option>
                <option value="GoPay">GoPay</option>
                <option value="Bank">Transfer Bank</option>
            </select>
            <label for="with-nomor">No. Rekening/e-Wallet:</label>
            <input type="text" id="with-nomor" placeholder="Nomor Rekening/e-Wallet" />
            <label for="with-bank" id="label-bank" style="display:none;">Nama Bank:</label>
            <input type="text" id="with-bank" placeholder="Contoh: BCA / Mandiri" style="display:none;" />
            <label for="with-jumlah">Jumlah (Rp):</label>
            <input type="number" id="with-jumlah" placeholder="Contoh: 100000" />
            <button class="primary" id="with-submit">Kirim</button>
            <button type="button" class="secondary" onclick="closeModal('withdrawModal')">Batal</button>
        </div>
    </div>

    <div id="historyModal" class="modal-overlay">
        <div class="modal-content">
            <h2>RIWAYAT TRANSAKSI</h2>
            <div id="history-content">
                <h3>Riwayat Deposit</h3>
                <table id="riwayat-deposit-modal">
                    <thead><tr><th>Tanggal</th><th>Jumlah (Rp)</th><th>Status</th></tr></thead>
                    <tbody><tr><td colspan="3" class="empty">Memuat data...</td></tr></tbody>
                </table>
                <h3>Riwayat Penarikan</h3>
                <table id="riwayat-penarikan-modal">
                    <thead><tr><th>Tanggal</th><th>Jumlah (Rp)</th><th>Status</th></tr></thead>
                    <tbody><tr><td colspan="3" class="empty">Memuat data...</td></tr></tbody>
                </table>
            </div>
            <div class="modal-buttons">
                <button class="secondary" onclick="closeModal('historyModal')">Tutup</button>
            </div>
        </div>
    </div>

    <div id="customAlertModal" class="modal-overlay">
        <div class="modal-content">
            <h2 id="customAlertTitle"></h2>
            <p id="customAlertMessage"></p>
            <div class="modal-buttons">
                <button class="primary" id="customAlertOkBtn">OK</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>